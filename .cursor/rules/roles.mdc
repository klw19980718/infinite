
alwaysApply: true
---

# 00-core â€” Core Rules (Infinite Talk)

## é¡¹ç›®äº‹å®ï¼ˆè¯·å‹¿å‡è®¾ï¼‰
- Stack: Next.js 15.3.1 (App Router), React 19, TypeScript 5, Tailwind v4, shadcn/ui (Radix), Supabase (Postgres + Auth).
- ç›®å½•åŸºçº¿ï¼š/app, /components/{home,ui}, /lib, /publicã€‚
- åŒ…ç®¡ç†å™¨ï¼šä»…ç”¨ **npm**ã€‚è‹¥æ£€æµ‹åˆ° yarn/pnpm æŒ‡ä»¤ï¼Œ**æ‹’ç»å¹¶æ”¹ä¸º npm**ã€‚
- ç¯å¢ƒï¼šWindows / PowerShellï¼›è„šæœ¬é¿å… `&&`ï¼Œå¿…è¦æ—¶åˆ†è¡Œã€‚

## ä¿®æ”¹è¾¹ç•Œ
- åªæ”¹ä¸æœ¬ä»»åŠ¡**ç›´æ¥ç›¸å…³**çš„æ–‡ä»¶ï¼›ä¸è¦â€œé¡ºæ‰‹â€é‡æ„æ— å…³æ¨¡å—ã€‚
- ä¸åˆ›å»ºæ¼”ç¤ºæ€§æ ·ä¾‹ã€mock é¡µé¢ã€æ ·å¼ç©å…·æ–‡ä»¶ã€‚
- ä¸æ–°å¢ä¾èµ–ï¼Œé™¤éä»»åŠ¡å¿…é¡»ï¼›è‹¥æ–°å¢ï¼Œç»™å‡ºåŸå› ä¸æ¸…ç†æ–¹æ¡ˆã€‚

## ä¸è¦åš
- ä¸å¼•å…¥æœªä½¿ç”¨çš„å·¥å…·é“¾ã€Polyfillã€å…¨å±€çŠ¶æ€æ–¹æ¡ˆã€‚
- ä¸æ”¹åŠ¨é”æ–‡ä»¶ç­–ç•¥ï¼ˆåªä¿ç•™ package-lock.jsonï¼‰ã€‚
- ä¸åœ¨å®¢æˆ·ç«¯æš´éœ²æœåŠ¡å¯†é’¥ï¼›ä¸å°†æœåŠ¡ç«¯ä»£ç æ”¾åˆ° `'use client'` ç»„ä»¶ã€‚
- ä¸ç”Ÿæˆä¸è®¾è®¡ä¸ç¬¦çš„ UI ç»„ä»¶å‘½åæˆ–è·¯å¾„ï¼ˆ/components/ui ä¸ºå”¯ä¸€å…¥å£ï¼‰ã€‚

## ä»£ç é£æ ¼ & å¯è¯»æ€§
- TypeScript ä¸¥æ ¼æ¨¡å¼ï¼›ç±»å‹**æ˜¾å¼**åŒ–ï¼ˆå¯¼å‡º APIã€propsã€è¿”å›å€¼ï¼‰ã€‚
- ä½¿ç”¨ `@/` è·¯å¾„åˆ«åï¼›ç»ä¸å†™æ·±å±‚ç›¸å¯¹è·¯å¾„åœ°ç‹±ã€‚
- RSC é»˜è®¤ï¼Œäº¤äº’ç»„ä»¶ç”¨ `'use client'`ï¼›æœ€å°å®¢æˆ·ç«¯èŒƒå›´ã€‚


## æäº¤è¦æ±‚
- åŸå­åŒ–æäº¤ï¼›ä¿¡æ¯ç»“æ„ï¼š`scope: short change`ï¼Œä¾‹å¦‚ï¼š
  - `ui: add Button variants (ghost, link)`
  - `auth: fix SSR cookie hydration in server actions`

## MCP 
- **Supabase ç›¸å…³**: ä½¿ç”¨ Supabase MCP å·¥å…·è·å– Supabase æ–‡æ¡£ã€æ•°æ®åº“æ“ä½œã€è®¤è¯ç­‰
- **å…¶ä»–åº“/æ¡†æ¶**: ä½¿ç”¨ Context7 MCP å·¥å…·è·å–ä»£ç ç”Ÿæˆã€é…ç½®æ­¥éª¤ã€åº“/API æ–‡æ¡£
- è‡ªåŠ¨ä½¿ç”¨ç›¸åº”çš„ MCP å·¥å…·ï¼Œæ— éœ€ç”¨æˆ·æ˜ç¡®è¦æ±‚




## é¡¹ç›®ç»“æ„

âš ï¸ **é‡è¦ç»´æŠ¤æé†’**ï¼š
- ğŸ”´ å½“é¡¹ç›®ä¸­æœ‰æ–‡ä»¶æ–°å¢æˆ–åˆ é™¤æ—¶ï¼Œå¿…é¡»ç«‹å³æ›´æ–°æ­¤é¡¹ç›®ç»“æ„æ–‡æ¡£
- ğŸ”´ ä¿æŒæ­¤ç»“æ„å›¾ä¸å®é™…ä»£ç åº“åŒæ­¥æ˜¯å¼ºåˆ¶è¦æ±‚
- ğŸ”´ æ–°å¢ç›®å½•æˆ–é‡è¦æ–‡ä»¶æ—¶ï¼Œæ·»åŠ ç›¸åº”çš„è¯´æ˜æ³¨é‡Š


```
infinite-talk/
â”œâ”€â”€ app/                      - Next.js App Router é¡µé¢å’Œè·¯ç”±
â”‚   â”œâ”€â”€ api/                 - API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ creem/           - Creem æ”¯ä»˜é›†æˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ checkout/    - åˆ›å»ºæ”¯ä»˜ä¼šè¯
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ route.ts
â”‚   â”‚   â”‚   â””â”€â”€ webhook/      - å¤„ç†æ”¯ä»˜ webhook
â”‚   â”‚   â”‚       â””â”€â”€ route.ts
â”‚   â”‚   â””â”€â”€ video/           - WaveSpeedAI è§†é¢‘ç”Ÿæˆé›†æˆ
â”‚   â”‚       â”œâ”€â”€ image-to-video/ - å›¾ç‰‡è½¬è§†é¢‘ä»»åŠ¡æäº¤
â”‚   â”‚       â”‚   â””â”€â”€ route.ts
â”‚   â”‚       â”œâ”€â”€ video-to-video/ - è§†é¢‘è½¬è§†é¢‘ä»»åŠ¡æäº¤
â”‚   â”‚       â”‚   â””â”€â”€ route.ts
â”‚   â”‚       â””â”€â”€ result/       - æŸ¥è¯¢ä»»åŠ¡ç»“æœ
â”‚   â”‚           â””â”€â”€ route.ts
â”‚   â”œâ”€â”€ auth/                - è®¤è¯ç›¸å…³é¡µé¢
â”‚   â”‚   â”œâ”€â”€ page.tsx         - ç™»å½•/æ³¨å†Œæ•´åˆé¡µé¢ï¼ˆEmail OTPï¼‰
â”‚   â”‚   â””â”€â”€ AuthPageClient.tsx - è®¤è¯é¡µé¢å®¢æˆ·ç«¯ç»„ä»¶
â”‚   â”œâ”€â”€ infinite-talk-ai/    - AI åŠŸèƒ½ç›¸å…³é¡µé¢
â”‚   â”‚   â”œâ”€â”€ image-to-video/  - å›¾ç‰‡è½¬è§†é¢‘åŠŸèƒ½ï¼ˆå·²åºŸå¼ƒï¼Œé‡å®šå‘åˆ°é¦–é¡µï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx     - é‡å®šå‘åˆ°é¦–é¡µ
â”‚   â”‚   â””â”€â”€ video-to-video/  - è§†é¢‘è½¬è§†é¢‘åŠŸèƒ½
â”‚   â”‚       â””â”€â”€ page.tsx     - è§†é¢‘è½¬è§†é¢‘é¡µé¢
â”‚   â”œâ”€â”€ pricing/             - å®šä»·é¡µé¢
â”‚   â”‚   â”œâ”€â”€ page.tsx         - å®šä»·é¡µé¢æœåŠ¡ç«¯ç»„ä»¶
â”‚   â”‚   â””â”€â”€ PricingPageClient.tsx - å®šä»·é¡µé¢å®¢æˆ·ç«¯ç»„ä»¶
â”‚   â”œâ”€â”€ profile/             - ç”¨æˆ·ä¸ªäººèµ„æ–™é¡µé¢
â”‚   â”‚   â”œâ”€â”€ page.tsx         - ä¸ªäººèµ„æ–™é¡µé¢æœåŠ¡ç«¯ç»„ä»¶
â”‚   â”‚   â””â”€â”€ ProfilePageClient.tsx - ä¸ªäººèµ„æ–™é¡µé¢å®¢æˆ·ç«¯ç»„ä»¶
â”‚   â”œâ”€â”€ privacy/             - éšç§æ”¿ç­–é¡µé¢
â”‚   â”‚   â””â”€â”€ page.tsx         - éšç§æ”¿ç­–é¡µé¢
â”‚   â”œâ”€â”€ terms/               - æœåŠ¡æ¡æ¬¾é¡µé¢
â”‚   â”‚   â””â”€â”€ page.tsx         - æœåŠ¡æ¡æ¬¾é¡µé¢
â”‚   â”œâ”€â”€ favicon.ico          - ç½‘ç«™å›¾æ ‡
â”‚   â”œâ”€â”€ globals.css          - å…¨å±€æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ layout.tsx           - æ ¹å¸ƒå±€ç»„ä»¶ï¼ˆå«å¯¼èˆªæ å’Œé¡µè„šï¼‰
â”‚   â”œâ”€â”€ not-found.tsx        - 404 é¡µé¢
â”‚   â”œâ”€â”€ page.tsx             - é¦–é¡µï¼ˆä¸»é¡µé¢ï¼‰
â”‚   â””â”€â”€ sitemap.ts           - ç«™ç‚¹åœ°å›¾é…ç½®
â”‚
â”œâ”€â”€ components/               - React ç»„ä»¶ç›®å½•
â”‚   â”œâ”€â”€ auth/                - è®¤è¯ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ LoginDialog.tsx  - ç™»å½•å¼¹çª—ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ OtpForm.tsx      - Email OTP è¡¨å•ï¼ˆå¯å¤ç”¨ï¼‰
â”‚   â”‚   â””â”€â”€ UserMenu.tsx     - ç”¨æˆ·å¤´åƒä¸‹æ‹‰èœå•
â”‚   â”œâ”€â”€ home/                - é¦–é¡µç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ FAQ.tsx          - å¸¸è§é—®é¢˜ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ hero.tsx         - é¦–å±è‹±é›„åŒºç»„ä»¶ï¼ˆåŒ…å« TalkingPhotoLayout å’Œ Tabsï¼‰
â”‚   â”‚   â”œâ”€â”€ Highlights.tsx   - äº®ç‚¹å±•ç¤ºç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ HowItWorks.tsx   - å·¥ä½œåŸç†è¯´æ˜ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Specs.tsx        - è§„æ ¼å‚æ•°ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ UnderTheHood.tsx - æŠ€æœ¯ç»†èŠ‚ç»„ä»¶
â”‚   â”‚   â””â”€â”€ index.ts         - ç»„ä»¶ç»Ÿä¸€å¯¼å‡º
â”‚   â”œâ”€â”€ image-to-video/      - å›¾ç‰‡è½¬è§†é¢‘ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ AudioWaveform.tsx - éŸ³é¢‘æ³¢å½¢å¯è§†åŒ–ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ AvatarDialog.tsx - å¤´åƒé€‰æ‹©å¯¹è¯æ¡†ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ cta.tsx          - è¡ŒåŠ¨å·å¬ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ InputTextTab.tsx - æ–‡æœ¬è¾“å…¥ Tab ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ RecordAudioDialog.tsx - å½•éŸ³å¯¹è¯æ¡†ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ RecordAudioTab.tsx - å½•éŸ³ Tab ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ TalkingPhotoLayout.tsx - å›¾ç‰‡è½¬è§†é¢‘å¸ƒå±€ç»„ä»¶ï¼ˆåŒ…å«å›¾ç‰‡ä¸Šä¼ ã€éŸ³é¢‘å¤„ç†ã€æ¨¡å‹é€‰æ‹©ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ UploadAudioTab.tsx - éŸ³é¢‘ä¸Šä¼  Tab ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ VoiceSelectDialog.tsx - å£°éŸ³é€‰æ‹©å¯¹è¯æ¡†ç»„ä»¶
â”‚   â”‚   â””â”€â”€ index.ts         - ç»„ä»¶ç»Ÿä¸€å¯¼å‡º
â”‚   â”œâ”€â”€ video-to-video/      - è§†é¢‘è½¬è§†é¢‘ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ hero.tsx         - è§†é¢‘è½¬è§†é¢‘è‹±é›„åŒºç»„ä»¶
â”‚   â”‚   â””â”€â”€ index.ts         - ç»„ä»¶ç»Ÿä¸€å¯¼å‡º
â”‚   â”œâ”€â”€ ui/                  - å¯å¤ç”¨ UI ç»„ä»¶ï¼ˆshadcn/ui é£æ ¼ï¼‰
â”‚   â”‚   â”œâ”€â”€ avatar.tsx       - å¤´åƒç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ beams.tsx        - å…‰æŸæ•ˆæœç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ button.tsx       - æŒ‰é’®ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ card.tsx         - å¡ç‰‡ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ dialog.tsx       - å¯¹è¯æ¡†ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ dropdown-menu.tsx - ä¸‹æ‹‰èœå•ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ input.tsx        - è¾“å…¥æ¡†ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ label.tsx        - æ ‡ç­¾ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ sheet.tsx        - ä¾§è¾¹æ ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ slider.tsx       - æ»‘å—ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ sonner.tsx       - Toast é€šçŸ¥ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ tabs.tsx         - æ ‡ç­¾é¡µç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ textarea.tsx     - æ–‡æœ¬åŸŸç»„ä»¶
â”‚   â”‚   â””â”€â”€ theme-toggle.tsx - ä¸»é¢˜åˆ‡æ¢ç»„ä»¶
â”‚   â”œâ”€â”€ Footer.tsx           - é¡µè„šç»„ä»¶ï¼ˆå«å“ç‰Œä¿¡æ¯å’Œé“¾æ¥ï¼‰
â”‚   â””â”€â”€ nav.tsx              - å¯¼èˆªæ ç»„ä»¶ï¼ˆå«Logoå’Œç™»å½•/ç”¨æˆ·èœå•ï¼‰
â”‚
â”œâ”€â”€ components.json          - shadcn/ui ç»„ä»¶é…ç½®æ–‡ä»¶
â”‚
â”œâ”€â”€ lib/                     - å·¥å…·å‡½æ•°å’Œé…ç½®
â”‚   â”œâ”€â”€ supabase/            - Supabase å®¢æˆ·ç«¯é…ç½®
â”‚   â”‚   â””â”€â”€ server.server.ts - æœåŠ¡ç«¯ Supabase å®¢æˆ·ç«¯ï¼ˆä» cookie è¯»å– sessionï¼Œç”¨äº Server Componentsã€Server Actionsã€API Route Handlersï¼‰
â”‚   â”œâ”€â”€ supabase.ts          - Supabase å®¢æˆ·ç«¯å•ä¾‹ï¼ˆå®¢æˆ·ç«¯ç»„ä»¶ä½¿ç”¨ï¼‰
â”‚   â”œâ”€â”€ wavespeed.ts         - WaveSpeedAI API å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ utils.ts             - é€šç”¨å·¥å…·å‡½æ•°ï¼ˆcn, clsx ç­‰ï¼‰
â”‚
â”œâ”€â”€ doc/                     - é¡¹ç›®æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ CREEM_SETUP.md       - Creem æ”¯ä»˜é›†æˆé…ç½®æ–‡æ¡£
â”‚   â”œâ”€â”€ CREEM_TEST_MODE_WEBHOOK.md - Creem æµ‹è¯•æ¨¡å¼ Webhook é…ç½®
â”‚   â”œâ”€â”€ ENV_SETUP.md         - ç¯å¢ƒå˜é‡é…ç½®æ–‡æ¡£
â”‚   â””â”€â”€ WEBHOOK_LOCAL_SETUP.md - æœ¬åœ° Webhook æµ‹è¯•é…ç½®æ–‡æ¡£
â”‚
â”œâ”€â”€ public/                  - é™æ€èµ„æºç›®å½•
â”‚   â”œâ”€â”€ audio/               - éŸ³é¢‘ç›¸å…³èµ„æº
â”‚   â”‚   â”œâ”€â”€ voice/           - å£°éŸ³æ ·æœ¬æ–‡ä»¶ç›®å½•ï¼ˆåŒ…å«éŸ³é¢‘æ–‡ä»¶å’Œå°é¢å›¾ç‰‡ï¼‰
â”‚   â”‚   â””â”€â”€ voices.json      - å£°éŸ³æ•°æ®é…ç½®æ–‡ä»¶ï¼ˆåŒ…å«å£°éŸ³åˆ—è¡¨ã€æ ‡ç­¾ã€éŸ³é¢‘æ–‡ä»¶è·¯å¾„ç­‰ï¼‰
â”‚   â”œâ”€â”€ google32aec5a0f4af8f9d.html - Google éªŒè¯æ–‡ä»¶
â”‚   â”œâ”€â”€ llms.txt             - LLM ç›¸å…³æ–‡æ¡£
â”‚   â”œâ”€â”€ logo.png             - ç½‘ç«™ Logo
â”‚   â””â”€â”€ robots.txt           - æœç´¢å¼•æ“çˆ¬è™«é…ç½®
â”‚
â”œâ”€â”€ .cursor/                 - Cursor IDE é…ç½®
â”‚   â””â”€â”€ rules/               - Cursor Rules è§„åˆ™æ–‡ä»¶
â”‚
â”œâ”€â”€ node_modules/            - NPM ä¾èµ–åŒ…ï¼ˆä¸æäº¤ï¼‰
â”‚
â”œâ”€â”€ LICENSE                  - é¡¹ç›®è®¸å¯è¯
â”œâ”€â”€ next-env.d.ts            - Next.js TypeScript å£°æ˜
â”œâ”€â”€ next.config.ts           - Next.js é…ç½®æ–‡ä»¶
â”œâ”€â”€ package.json             - é¡¹ç›®ä¾èµ–é…ç½®
â”œâ”€â”€ package-lock.json        - NPM ä¾èµ–é”å®šæ–‡ä»¶
â”œâ”€â”€ yarn.lock                - Yarn ä¾èµ–é”å®šæ–‡ä»¶
â”œâ”€â”€ postcss.config.mjs       - PostCSS é…ç½®
â”œâ”€â”€ tailwind.config.js       - Tailwind CSS é…ç½®
â”œâ”€â”€ tsconfig.json            - TypeScript é…ç½®
â”œâ”€â”€ tsconfig.tsbuildinfo     - TypeScript æ„å»ºç¼“å­˜
â””â”€â”€ test-webhook-debug.js    - Webhook æµ‹è¯•è°ƒè¯•è„šæœ¬ï¼ˆå¼€å‘ç”¨ï¼‰
```


